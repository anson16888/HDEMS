<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>人员排班系统</title>
    <script src="https://res.gemcoder.com/js/reload.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#165DFF',
              secondary: '#4080FF',
              accent: '#0E42D2',
              neutral: '#F5F7FA',
              'neutral-dark': '#E5E6EB',
              'text-primary': '#1D2129',
              'text-secondary': '#4E5969',
              'text-placeholder': '#86909C'
            },
            spacing: {
              '18': '4.5rem',
              '22': '5.5rem'
            },
            boxShadow: {
              'card': '0 2px 8px 0 rgba(0, 0, 0, 0.08)',
              'dropdown': '0 4px 16px 0 rgba(0, 0, 0, 0.12)'
            }
          }
        }
      };
    </script>
    <style type="text/tailwindcss">
      @layer utilities {
          .content-auto {
              content-visibility: auto;
          }
          .sidebar-item {
              @apply flex items-center gap-3 px-4 py-3 text-text-secondary hover:bg-primary/5 hover:text-text-primary transition-all duration-200 cursor-pointer;
          }
          .sidebar-item.active-menu {
              @apply bg-primary/10 text-text-primary font-medium;
          }
          .sidebar-icon {
              @apply w-5 h-5 flex-shrink-0;
          }
          .nav-shadow {
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          }
      }
      .active-menu {
          background-color: rgba(22, 93, 255, 0.1) !important;
          color: #165DFF !important;
          position: relative;
      }

      .active-menu::before {
          content: '';
          position: absolute;
          left: 0;
          top: 0;
          height: 100%;
          width: 3px;
          background-color: #165DFF;
      }
    </style>
  </head>
  <body
    class="bg-neutral text-text-primary h-screen flex flex-col overflow-hidden"
  >
    <!-- 顶部导航栏 -->
    <header class="bg-white nav-shadow z-10">
      <div
        class="container mx-auto px-4 h-16 flex items-center justify-between"
      >
        <div class="flex items-center gap-2">
          <button
            id="toggle-sidebar"
            class="lg:hidden p-2 rounded-md hover:bg-neutral transition-colors"
          >
            <i class="fas fa-bars text-text-secondary"> </i>
          </button>
          <div class="flex items-center gap-2">
            <i class="fas fa-calendar-alt text-primary text-2xl"> </i>
            <h1 class="text-xl font-semibold text-text-primary hidden sm:block">
              人员排班系统
            </h1>
          </div>
        </div>
        <div class="flex items-center gap-4">
          <div class="relative hidden md:block">
            <input
              type="text"
              placeholder="搜索..."
              class="pl-10 pr-4 py-2 rounded-full border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary w-64 transition-all"
            />
            <i
              class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-text-placeholder"
            >
            </i>
          </div>
          <div class="relative group">
            <button
              class="flex items-center gap-2 p-1 rounded-full hover:bg-neutral transition-colors"
            >
              <img
                src="./api/searchImage?query=user avatar with blue background, professional style, simple design&amp;width=36&amp;height=36"
                alt="用户头像"
                class="w-9 h-9 rounded-full object-cover border-2 border-white shadow-sm"
              />
              <span class="hidden md:inline-block text-sm font-medium">
                管理员
              </span>
              <i
                class="fas fa-angle-down text-xs text-text-secondary group-hover:text-primary transition-colors"
              >
              </i>
            </button>
            <div
              class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-dropdown py-2 z-20 hidden group-hover:block"
            >
              <a
                href="javascript:void(0);"
                class="block px-4 py-2 text-sm text-text-secondary hover:bg-neutral hover:text-primary transition-colors"
              >
                <i class="fas fa-user-circle mr-2"> </i>
                个人资料
              </a>
              <a
                href="javascript:void(0);"
                class="block px-4 py-2 text-sm text-text-secondary hover:bg-neutral hover:text-primary transition-colors"
              >
                <i class="fas fa-cog mr-2"> </i>
                系统设置
              </a>
              <div class="border-t border-neutral-dark my-1"></div>
              <a
                href="javascript:void(0);"
                class="block px-4 py-2 text-sm text-red-500 hover:bg-neutral transition-colors"
              >
                <i class="fas fa-sign-out-alt mr-2"> </i>
                退出登录
              </a>
            </div>
          </div>
        </div>
      </div>
    </header>
    <div class="flex flex-1 overflow-hidden">
      <!-- 侧边栏 -->
      <aside
        id="sidebar"
        class="bg-white w-64 shadow-card z-10 transition-all duration-300 transform lg:translate-x-0 -translate-x-full fixed lg:relative h-[calc(100vh-4rem)]"
      >
        <div class="p-4 border-b border-neutral-dark">
          <div class="relative">
            <input
              type="text"
              placeholder="搜索菜单..."
              class="w-full pl-10 pr-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary text-sm"
            />
            <i
              class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-text-placeholder text-sm"
            >
            </i>
          </div>
        </div>
        <nav class="p-2">
          <h2
            class="text-xs font-semibold text-text-placeholder uppercase tracking-wider px-3 py-2"
          >
            主要功能
          </h2>
          <a
            href="javascript:void(0);"
            data-uuid="bureauLevelScheduling"
            onclick="ytCustomClickRouter(this, event)"
            class="sidebar-item active-menu"
          >
            <i class="fas fa-building sidebar-icon">
              <span class="sr-only"> 局级行政排班 </span>
            </i>
            <span> 局级行政排班 </span>
          </a>
          <a
            href="javascript:void(0);"
            data-uuid="hospitalLevelScheduling"
            onclick="ytCustomClickRouter(this, event)"
            class="sidebar-item"
          >
            <i class="fas fa-hospital sidebar-icon">
              <span class="sr-only"> 院级行政排班 </span>
            </i>
            <span> 院级行政排班 </span>
          </a>
          <a
            href="javascript:void(0);"
            data-uuid="directorScheduling"
            onclick="ytCustomClickRouter(this, event)"
            class="sidebar-item"
          >
            <i class="fas fa-user-tie sidebar-icon">
              <span class="sr-only"> 院内主任排班 </span>
            </i>
            <span> 院内主任排班 </span>
          </a>
          <a
            href="javascript:void(0);"
            data-uuid="schedulingOverview"
            onclick="ytCustomClickRouter(this, event)"
            class="sidebar-item"
          >
            <i class="fas fa-list sidebar-icon">
              <span class="sr-only"> 排班一览表 </span>
            </i>
            <span> 排班一览表 </span>
          </a>
        </nav>
        <div
          class="absolute bottom-0 left-0 right-0 p-4 border-t border-neutral-dark"
        >
          <div class="bg-primary/5 rounded-lg p-3">
            <div class="flex items-start gap-3">
              <i class="fas fa-info-circle text-primary mt-0.5"> </i>
              <div>
                <h3 class="text-sm font-medium text-text-primary">系统提示</h3>
                <p class="text-xs text-text-secondary mt-1">
                  请定期备份排班数据，确保数据安全
                </p>
              </div>
            </div>
          </div>
        </div>
      </aside>
      <!-- 主内容区域 -->
      <main class="flex-1 overflow-hidden relative">
        <iframe
          id="navigation"
          src=""
          class=""
          width="100%"
          height="100%"
          data-iframe-id="navigation-iframe"
          srcdoc="<html lang='zh-CN'>
        <head >
        <meta charset='UTF-8'/>
<meta name='viewport' content='width=device-width, initial-scale=1.0'/>
<title >局级行政排班</title>
<script src='https://res.gemcoder.com/js/reload.js'></script>
<script src='https://cdn.tailwindcss.com'></script>
<link href='https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css' rel='stylesheet'/>
<script >tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#165DFF',
        secondary: '#4080FF',
        accent: '#0E42D2',
        neutral: '#F5F7FA',
        'neutral-dark': '#E5E6EB',
        'text-primary': '#1D2129',
        'text-secondary': '#4E5969',
        'text-placeholder': '#86909C'
      },
      spacing: {
        '18': '4.5rem',
        '22': '5.5rem'
      },
      boxShadow: {
        'card': '0 2px 8px 0 rgba(0, 0, 0, 0.08)',
        'dropdown': '0 4px 16px 0 rgba(0, 0, 0, 0.12)'
      }
    }
  }
};</script>
<style type='text/tailwindcss'>
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .btn-primary {
                @apply bg-primary text-white px-4 py-2 rounded-lg hover:bg-accent transition-colors duration-200 flex items-center gap-2;
            }
            .btn-secondary {
                @apply bg-white text-text-primary border border-neutral-dark px-4 py-2 rounded-lg hover:bg-neutral transition-colors duration-200 flex items-center gap-2;
            }
            .btn-danger {
                @apply bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors duration-200 flex items-center gap-2;
            }
            .input-field {
                @apply border border-neutral-dark rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all;
            }
            .table-header {
                @apply bg-neutral text-text-secondary text-sm font-medium;
            }
            .table-row {
                @apply border-b border-neutral-dark hover:bg-neutral/50 transition-colors;
            }
            .modal-mask {
                @apply fixed inset-0 bg-black/50 z-50 flex items-center justify-center;
            }
            .modal-mask.hidden {
                display: none;
            }
            .modal-content {
                @apply bg-white rounded-lg shadow-dropdown w-full max-w-3xl max-h-[90vh] overflow-y-auto;
            }
        }
    </style>
    
      <style>
          ::-webkit-scrollbar { width: 0px; }
      </style>
  </head>
<body class='p-4 bg-white rounded-lg shadow-md'>
        <!-- 页面标题 -->
<div class='mb-6'>
        <h2 class='text-[clamp(1.25rem,3vw,1.75rem)] font-semibold text-text-primary'>
        局级行政排班
    </h2>
<p class='text-text-secondary text-sm mt-1'>
        管理局级行政人员的排班信息，支持增删改查及Excel导入导出
    </p>
    </div>
<!-- 操作栏 -->
<div class='flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6'>
        <div class='flex flex-wrap gap-3 w-full sm:w-auto'>
        <button id='add-btn' class='btn-primary'>
        <i class='fas fa-plus'>
        </i>
<span >
        新增排班
    </span>
    </button>
<button id='import-btn' class='btn-secondary'>
        <i class='fas fa-upload'>
        </i>
<span >
        导入Excel
    </span>
    </button>
<input type='file' id='file-upload' accept='.xlsx,.xls' class='hidden'/>
<button id='export-btn' class='btn-secondary'>
        <i class='fas fa-download'>
        </i>
<span >
        导出Excel
    </span>
    </button>
<button id='batch-delete-btn' class='btn-danger' disabled>
        <i class='fas fa-trash-alt'>
        </i>
<span >
        批量删除
    </span>
    </button>
    </div>
<div class='w-full sm:w-auto flex gap-3'>
        <div class='relative flex-1 sm:flex-none'>
        <input type='text' id='search-input' placeholder='搜索排班信息...' class='input-field pl-10 w-full sm:w-64'/>
<i class='fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-text-placeholder'>
        </i>
    </div>
<button id='search-btn' class='btn-primary whitespace-nowrap'>
        <i class='fas fa-search'>
        </i>
<span >
        搜索
    </span>
    </button>
    </div>
    </div>
<!-- 筛选条件 -->
<div class='bg-neutral rounded-lg p-4 mb-6'>
        <div class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4'>
        <div >
        <label class='block text-sm font-medium text-text-secondary mb-1'>
        日期范围
    </label>
<div class='flex gap-2'>
        <input type='date' id='start-date' class='input-field flex-1'/>
<span class='flex items-center text-text-placeholder'>
        至
    </span>
<input type='date' id='end-date' class='input-field flex-1'/>
    </div>
    </div>
<div >
        <label class='block text-sm font-medium text-text-secondary mb-1'>
        医院名称
    </label>
<select id='hospital-select' class='input-field w-full'>
        <option value>
        全部医院
    </option>
<option value='hospital1'>
        第一人民医院
    </option>
<option value='hospital2'>
        第二人民医院
    </option>
<option value='hospital3'>
        第三人民医院
    </option>
    </select>
    </div>
<div >
        <label class='block text-sm font-medium text-text-secondary mb-1'>
        科室
    </label>
<select id='department-select' class='input-field w-full'>
        <option value>
        全部科室
    </option>
<option value='dept1'>
        内科
    </option>
<option value='dept2'>
        外科
    </option>
<option value='dept3'>
        妇产科
    </option>
<option value='dept4'>
        儿科
    </option>
    </select>
    </div>
<div >
        <label class='block text-sm font-medium text-text-secondary mb-1'>
        班次
    </label>
<select id='shift-select' class='input-field w-full'>
        <option value>
        全部班次
    </option>
<option value='morning'>
        早班
    </option>
<option value='afternoon'>
        中班
    </option>
<option value='evening'>
        晚班
    </option>
<option value='night'>
        夜班
    </option>
    </select>
    </div>
    </div>
<div class='flex justify-end mt-4 gap-3'>
        <button id='reset-filter' class='btn-secondary'>
        <i class='fas fa-sync-alt'>
        </i>
<span >
        重置
    </span>
    </button>
<button id='apply-filter' class='btn-primary'>
        <i class='fas fa-filter'>
        </i>
<span >
        应用筛选
    </span>
    </button>
    </div>
    </div>
<!-- 排班表格 -->
<div class='bg-white rounded-lg shadow-card overflow-hidden'>
        <div class='overflow-x-auto'>
        <table class='w-full'>
        <thead >
        <tr class='table-header'>
        <th class='px-4 py-3 text-left w-12'>
        <input type='checkbox' id='select-all' class='rounded text-primary focus:ring-primary'/>
    </th>
<th class='px-4 py-3 text-left'>
        日期
    </th>
<th class='px-4 py-3 text-left'>
        医院名称
    </th>
<th class='px-4 py-3 text-left'>
        班次
    </th>
<th class='px-4 py-3 text-left'>
        人员
    </th>
<th class='px-4 py-3 text-left'>
        电话
    </th>
<th class='px-4 py-3 text-left'>
        人员职级
    </th>
<th class='px-4 py-3 text-left'>
        科室
    </th>
<th class='px-4 py-3 text-left'>
        职称
    </th>
<th class='px-4 py-3 text-left'>
        备注
    </th>
<th class='px-4 py-3 text-left w-24'>
        操作
    </th>
    </tr>
    </thead>
<tbody id='scheduling-table-body'>
        <!-- 表格数据将通过JavaScript动态生成 -->
<tr class='table-row'>
        <td class='px-4 py-3'>
        <input type='checkbox' class='row-checkbox rounded text-primary focus:ring-primary'/>
    </td>
<td class='px-4 py-3'>
        2023-11-01
    </td>
<td class='px-4 py-3'>
        第一人民医院
    </td>
<td class='px-4 py-3'>
        早班
    </td>
<td class='px-4 py-3'>
        张三
    </td>
<td class='px-4 py-3'>
        13800138000
    </td>
<td class='px-4 py-3'>
        局长
    </td>
<td class='px-4 py-3'>
        行政部
    </td>
<td class='px-4 py-3'>
        主任医师
    </td>
<td class='px-4 py-3 text-sm text-text-secondary'>
        负责日常行政事务
    </td>
<td class='px-4 py-3'>
        <div class='flex gap-2'>
        <button class='text-primary hover:text-accent transition-colors' title='编辑'>
        <i class='fas fa-edit'>
        </i>
    </button>
<button class='text-red-500 hover:text-red-600 transition-colors' title='删除'>
        <i class='fas fa-trash-alt'>
        </i>
    </button>
    </div>
    </td>
    </tr>
<tr class='table-row'>
        <td class='px-4 py-3'>
        <input type='checkbox' class='row-checkbox rounded text-primary focus:ring-primary'/>
    </td>
<td class='px-4 py-3'>
        2023-11-01
    </td>
<td class='px-4 py-3'>
        第二人民医院
    </td>
<td class='px-4 py-3'>
        中班
    </td>
<td class='px-4 py-3'>
        李四
    </td>
<td class='px-4 py-3'>
        13900139000
    </td>
<td class='px-4 py-3'>
        副局长
    </td>
<td class='px-4 py-3'>
        医务科
    </td>
<td class='px-4 py-3'>
        副主任医师
    </td>
<td class='px-4 py-3 text-sm text-text-secondary'>
        负责医疗质量监督
    </td>
<td class='px-4 py-3'>
        <div class='flex gap-2'>
        <button class='text-primary hover:text-accent transition-colors' title='编辑'>
        <i class='fas fa-edit'>
        </i>
    </button>
<button class='text-red-500 hover:text-red-600 transition-colors' title='删除'>
        <i class='fas fa-trash-alt'>
        </i>
    </button>
    </div>
    </td>
    </tr>
<tr class='table-row'>
        <td class='px-4 py-3'>
        <input type='checkbox' class='row-checkbox rounded text-primary focus:ring-primary'/>
    </td>
<td class='px-4 py-3'>
        2023-11-02
    </td>
<td class='px-4 py-3'>
        第三人民医院
    </td>
<td class='px-4 py-3'>
        晚班
    </td>
<td class='px-4 py-3'>
        王五
    </td>
<td class='px-4 py-3'>
        13700137000
    </td>
<td class='px-4 py-3'>
        科长
    </td>
<td class='px-4 py-3'>
        护理部
    </td>
<td class='px-4 py-3'>
        主管护师
    </td>
<td class='px-4 py-3 text-sm text-text-secondary'>
        负责护理工作安排
    </td>
<td class='px-4 py-3'>
        <div class='flex gap-2'>
        <button class='text-primary hover:text-accent transition-colors' title='编辑'>
        <i class='fas fa-edit'>
        </i>
    </button>
<button class='text-red-500 hover:text-red-600 transition-colors' title='删除'>
        <i class='fas fa-trash-alt'>
        </i>
    </button>
    </div>
    </td>
    </tr>
    </tbody>
    </table>
    </div>
<!-- 分页 -->
<div class='px-4 py-3 border-t border-neutral-dark flex flex-col sm:flex-row justify-between items-center gap-4'>
        <div class='text-sm text-text-secondary'>
        显示
<span id='start-record'>
        1
    </span>
至
<span id='end-record'>
        3
    </span>
条，共
<span id='total-records'>
        3
    </span>
条记录
    </div>
<div class='flex items-center gap-2'>
        <button class='w-9 h-9 flex items-center justify-center rounded border border-neutral-dark text-text-secondary hover:bg-neutral disabled:opacity-50' disabled>
        <i class='fas fa-angle-left'>
        </i>
    </button>
<button class='w-9 h-9 flex items-center justify-center rounded bg-primary text-white'>
        1
    </button>
<button class='w-9 h-9 flex items-center justify-center rounded border border-neutral-dark text-text-secondary hover:bg-neutral'>
        2
    </button>
<button class='w-9 h-9 flex items-center justify-center rounded border border-neutral-dark text-text-secondary hover:bg-neutral'>
        3
    </button>
<button class='w-9 h-9 flex items-center justify-center rounded border border-neutral-dark text-text-secondary hover:bg-neutral'>
        <i class='fas fa-angle-right'>
        </i>
    </button>
<div class='flex items-center gap-2'>
        <span class='text-sm text-text-secondary'>
        跳至
    </span>
<input type='number' min='1' max='3' value='1' class='input-field w-16 text-center'/>
<span class='text-sm text-text-secondary'>
        页
    </span>
<button class='btn-secondary px-3 py-1 text-sm'>
        确定
    </button>
    </div>
    </div>
    </div>
    </div>
<!-- 新增/编辑排班模态框 -->
<div id='scheduling-modal' class='modal-mask hidden'>
        <div class='modal-content'>
        <div class='p-5 border-b border-neutral-dark flex justify-between items-center'>
        <h3 id='modal-title' class='text-lg font-semibold text-text-primary'>
        新增排班
    </h3>
<button id='close-modal' class='text-text-secondary hover:text-text-primary transition-colors'>
        <i class='fas fa-times'>
        </i>
    </button>
    </div>
<div class='p-5'>
        <form id='scheduling-form'>
        <input type='hidden' id='scheduling-id'/>
<div class='grid grid-cols-1 md:grid-cols-2 gap-4 mb-4'>
        <div >
        <label for='date' class='block text-sm font-medium text-text-secondary mb-1'>
        日期
<span class='text-red-500'>
        *
    </span>
    </label>
<input type='date' id='date' class='input-field w-full' required/>
    </div>
<div >
        <label for='hospital' class='block text-sm font-medium text-text-secondary mb-1'>
        医院名称
<span class='text-red-500'>
        *
    </span>
    </label>
<select id='hospital' class='input-field w-full' required>
        <option value>
        请选择医院
    </option>
<option value='hospital1'>
        第一人民医院
    </option>
<option value='hospital2'>
        第二人民医院
    </option>
<option value='hospital3'>
        第三人民医院
    </option>
    </select>
    </div>
<div >
        <label for='shift' class='block text-sm font-medium text-text-secondary mb-1'>
        班次
<span class='text-red-500'>
        *
    </span>
    </label>
<select id='shift' class='input-field w-full' required>
        <option value>
        请选择班次
    </option>
<option value='morning'>
        早班
    </option>
<option value='afternoon'>
        中班
    </option>
<option value='evening'>
        晚班
    </option>
<option value='night'>
        夜班
    </option>
    </select>
    </div>
<div >
        <label for='person' class='block text-sm font-medium text-text-secondary mb-1'>
        人员
<span class='text-red-500'>
        *
    </span>
    </label>
<input type='text' id='person' class='input-field w-full' placeholder='请输入人员姓名' required/>
    </div>
<div >
        <label for='phone' class='block text-sm font-medium text-text-secondary mb-1'>
        电话
<span class='text-red-500'>
        *
    </span>
    </label>
<input type='tel' id='phone' class='input-field w-full' placeholder='请输入联系电话' required/>
    </div>
<div >
        <label for='rank' class='block text-sm font-medium text-text-secondary mb-1'>
        人员职级
<span class='text-red-500'>
        *
    </span>
    </label>
<select id='rank' class='input-field w-full' required>
        <option value>
        请选择职级
    </option>
<option value='director'>
        局长
    </option>
<option value='deputy-director'>
        副局长
    </option>
<option value='chief'>
        科长
    </option>
<option value='deputy-chief'>
        副科长
    </option>
<option value='staff'>
        科员
    </option>
    </select>
    </div>
<div >
        <label for='department' class='block text-sm font-medium text-text-secondary mb-1'>
        科室
<span class='text-red-500'>
        *
    </span>
    </label>
<select id='department' class='input-field w-full' required>
        <option value>
        请选择科室
    </option>
<option value='admin'>
        行政部
    </option>
<option value='medical'>
        医务科
    </option>
<option value='nursing'>
        护理部
    </option>
<option value='finance'>
        财务部
    </option>
<option value='logistics'>
        后勤部
    </option>
    </select>
    </div>
<div >
        <label for='title' class='block text-sm font-medium text-text-secondary mb-1'>
        职称
<span class='text-red-500'>
        *
    </span>
    </label>
<select id='title' class='input-field w-full' required>
        <option value>
        请选择职称
    </option>
<option value='chief-physician'>
        主任医师
    </option>
<option value='associate-chief-physician'>
        副主任医师
    </option>
<option value='attending-physician'>
        主治医师
    </option>
<option value='resident-physician'>
        住院医师
    </option>
<option value='intern'>
        实习医师
    </option>
    </select>
    </div>
<div class='md:col-span-2'>
        <label for='notes' class='block text-sm font-medium text-text-secondary mb-1'>
        备注
    </label>
<textarea id='notes' rows='3' class='input-field w-full' placeholder='请输入备注信息'>
        </textarea>
    </div>
    </div>
    </form>
    </div>
<div class='p-5 border-t border-neutral-dark flex justify-end gap-3'>
        <button id='cancel-btn' class='btn-secondary'>
        取消
    </button>
<button id='save-btn' class='btn-primary'>
        保存
    </button>
    </div>
    </div>
    </div>
<!-- 删除确认模态框 -->
<div id='delete-modal' class='modal-mask hidden'>
        <div class='modal-content max-w-md'>
        <div class='p-5 border-b border-neutral-dark flex justify-between items-center'>
        <h3 class='text-lg font-semibold text-text-primary'>
        确认删除
    </h3>
<button id='close-delete-modal' class='text-text-secondary hover:text-text-primary transition-colors'>
        <i class='fas fa-times'>
        </i>
    </button>
    </div>
<div class='p-5'>
        <p class='text-text-secondary mb-4'>
        您确定要删除选中的排班记录吗？此操作不可撤销。
    </p>
<input type='hidden' id='delete-id'/>
    </div>
<div class='p-5 border-t border-neutral-dark flex justify-end gap-3'>
        <button id='cancel-delete-btn' class='btn-secondary'>
        取消
    </button>
<button id='confirm-delete-btn' class='btn-danger'>
        确认删除
    </button>
    </div>
    </div>
    </div>
<script >// 页面加载完成后执行
document.addEventListener('DOMContentLoaded', function () {
  // 通知父页面调整iframe高度
  ytSendPageSize();

  // 获取DOM元素
  var addBtn = document.getElementById('add-btn');
  var importBtn = document.getElementById('import-btn');
  var exportBtn = document.getElementById('export-btn');
  var batchDeleteBtn = document.getElementById('batch-delete-btn');
  var searchBtn = document.getElementById('search-btn');
  var resetFilterBtn = document.getElementById('reset-filter');
  var applyFilterBtn = document.getElementById('apply-filter');
  var selectAllCheckbox = document.getElementById('select-all');
  var rowCheckboxes = document.querySelectorAll('.row-checkbox');
  var schedulingModal = document.getElementById('scheduling-modal');
  var deleteModal = document.getElementById('delete-modal');
  var closeModalBtn = document.getElementById('close-modal');
  var closeDeleteModalBtn = document.getElementById('close-delete-modal');
  var cancelBtn = document.getElementById('cancel-btn');
  var saveBtn = document.getElementById('save-btn');
  var cancelDeleteBtn = document.getElementById('cancel-delete-btn');
  var confirmDeleteBtn = document.getElementById('confirm-delete-btn');
  var fileUpload = document.getElementById('file-upload');
  var modalTitle = document.getElementById('modal-title');
  var schedulingForm = document.getElementById('scheduling-form');

  // 编辑和删除按钮事件委托
  var tableBody = document.getElementById('scheduling-table-body');
  tableBody.addEventListener('click', function (e) {
    var editBtn = e.target.closest('[title=&quot;编辑&quot;]');
    var deleteBtn = e.target.closest('[title=&quot;删除&quot;]');
    if (editBtn) {
      openEditModal();
    } else if (deleteBtn) {
      openDeleteModal();
    }
  });

  // 新增按钮点击事件
  addBtn.addEventListener('click', function () {
    modalTitle.textContent = '新增排班';
    schedulingForm.reset();
    document.getElementById('scheduling-id').value = '';
    openModal(schedulingModal);
  });

  // 导入按钮点击事件
  importBtn.addEventListener('click', function () {
    fileUpload.click();
  });

  // 文件上传事件
  fileUpload.addEventListener('change', function (e) {
    if (e.target.files.length > 0) {
      var fileName = e.target.files[0].name;
      alert(&quot;\u6587\u4EF6&quot;.concat(fileName, &quot;\u5DF2\u9009\u62E9\uFF0C\u51C6\u5907\u5BFC\u5165&quot;));
      // 这里可以添加文件上传逻辑
    }
  });

  // 导出按钮点击事件
  exportBtn.addEventListener('click', function () {
    alert('正在导出Excel文件...');
    // 这里可以添加导出逻辑
  });

  // 搜索按钮点击事件
  searchBtn.addEventListener('click', function () {
    var searchText = document.getElementById('search-input').value;
    alert(&quot;\u641C\u7D22\u5185\u5BB9:&quot;.concat(searchText));
    // 这里可以添加搜索逻辑
  });

  // 重置筛选按钮点击事件
  resetFilterBtn.addEventListener('click', function () {
    document.getElementById('start-date').value = '';
    document.getElementById('end-date').value = '';
    document.getElementById('hospital-select').value = '';
    document.getElementById('department-select').value = '';
    document.getElementById('shift-select').value = '';
  });

  // 应用筛选按钮点击事件
  applyFilterBtn.addEventListener('click', function () {
    var startDate = document.getElementById('start-date').value;
    var endDate = document.getElementById('end-date').value;
    var hospital = document.getElementById('hospital-select').value;
    var department = document.getElementById('department-select').value;
    var shift = document.getElementById('shift-select').value;
    alert(&quot;\u5E94\u7528\u7B5B\u9009\u6761\u4EF6:\n\u65E5\u671F\u8303\u56F4:&quot;.concat(startDate || '未选择', &quot;\u81F3&quot;).concat(endDate || '未选择', &quot;\u533B\u9662:&quot;).concat(hospital || '全部', &quot;\u79D1\u5BA4:&quot;).concat(department || '全部', &quot;\u73ED\u6B21:&quot;).concat(shift || '全部'));
    // 这里可以添加筛选逻辑
  });

  // 全选复选框事件
  selectAllCheckbox.addEventListener('change', function () {
    var _this = this;
    rowCheckboxes.forEach(function (checkbox) {
      checkbox.checked = _this.checked;
    });
    updateBatchDeleteButton();
  });

  // 行复选框事件
  rowCheckboxes.forEach(function (checkbox) {
    checkbox.addEventListener('change', updateBatchDeleteButton);
  });

  // 更新批量删除按钮状态
  function updateBatchDeleteButton() {
    var checkedCount = document.querySelectorAll('.row-checkbox:checked').length;
    batchDeleteBtn.disabled = checkedCount === 0;
  }

  // 批量删除按钮点击事件
  batchDeleteBtn.addEventListener('click', function () {
    var checkedCount = document.querySelectorAll('.row-checkbox:checked').length;
    if (checkedCount > 0) {
      document.querySelector('#delete-modal p').textContent = &quot;\u60A8\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684&quot;.concat(checkedCount, &quot;\u6761\u6392\u73ED\u8BB0\u5F55\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\u3002&quot;);
      openModal(deleteModal);
    }
  });

  // 打开编辑模态框
  function openEditModal() {
    modalTitle.textContent = '编辑排班';
    // 这里可以添加填充表单数据的逻辑
    document.getElementById('scheduling-id').value = '1';
    document.getElementById('date').value = '2023-11-01';
    document.getElementById('hospital').value = 'hospital1';
    document.getElementById('shift').value = 'morning';
    document.getElementById('person').value = '张三';
    document.getElementById('phone').value = '13800138000';
    document.getElementById('rank').value = 'director';
    document.getElementById('department').value = 'admin';
    document.getElementById('title').value = 'chief-physician';
    document.getElementById('notes').value = '负责日常行政事务';
    openModal(schedulingModal);
  }

  // 打开删除模态框
  function openDeleteModal() {
    document.getElementById('delete-id').value = '1';
    openModal(deleteModal);
  }

  // 打开模态框
  function openModal(modal) {
    modal.classList.remove('hidden');
    ytSendPageSize(); // 通知父页面调整高度
  }

  // 关闭模态框
  function closeModal(modal) {
    modal.classList.add('hidden');
    ytSendPageSize(); // 通知父页面调整高度
  }

  // 关闭新增/编辑模态框
  closeModalBtn.addEventListener('click', function () {
    return closeModal(schedulingModal);
  });
  cancelBtn.addEventListener('click', function () {
    return closeModal(schedulingModal);
  });

  // 关闭删除模态框
  closeDeleteModalBtn.addEventListener('click', function () {
    return closeModal(deleteModal);
  });
  cancelDeleteBtn.addEventListener('click', function () {
    return closeModal(deleteModal);
  });

  // 保存按钮点击事件
  saveBtn.addEventListener('click', function () {
    if (schedulingForm.checkValidity()) {
      // 这里可以添加表单提交逻辑
      alert('排班信息保存成功！');
      closeModal(schedulingModal);
    } else {
      schedulingForm.reportValidity();
    }
  });

  // 确认删除按钮点击事件
  confirmDeleteBtn.addEventListener('click', function () {
    var id = document.getElementById('delete-id').value;
    // 这里可以添加删除逻辑
    alert(&quot;\u6392\u73ED\u8BB0\u5F55\u5DF2\u5220\u9664\uFF0CID:&quot;.concat(id));
    closeModal(deleteModal);
  });

  // 点击模态框外部关闭模态框
  schedulingModal.addEventListener('click', function (e) {
    if (e.target === this) closeModal(schedulingModal);
  });
  deleteModal.addEventListener('click', function (e) {
    if (e.target === this) closeModal(deleteModal);
  });
});
// 当页面大小或者内容发生变化时，通知导航页面跳转iframe高度
ytSendPageSize();</script>
    </body>
    </html>"
        ></iframe>
        <!-- 移动端遮罩层 -->
        <div
          id="sidebar-overlay"
          class="fixed inset-0 bg-black/50 z-0 lg:hidden hidden"
          onclick="toggleSidebar()"
        ></div>
      </main>
    </div>
    <script>
      // 侧边栏切换
      function toggleSidebar() {
        var sidebar = document.getElementById('sidebar');
        var overlay = document.getElementById('sidebar-overlay');
        sidebar.classList.toggle('-translate-x-full');
        overlay.classList.toggle('hidden');
        overlay.classList.toggle('z-10');
      }
      // 移动端菜单按钮点击事件
      document.getElementById('toggle-sidebar').addEventListener('click', toggleSidebar);
      // 监听子页面大小变化，调整iframe的高度
      ytGetIframeResize(document.getElementById('navigation'));
    </script>
  </body>
</html>
